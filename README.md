# TableTalk

一个功能完整的Flutter餐厅应用，支持用户登录、店铺浏览、评论查看、即时聊天等功能。

## 项目概述

TableTalk 是一个基于 Flutter 开发的餐厅应用，旨在为用户提供便捷的餐厅信息浏览、评论查看和即时聊天功能。用户可以浏览附近的餐厅，查看餐厅详情和评论，与餐厅工作人员进行实时聊天，关注感兴趣的用户等。

## UI设计稿

![](/UI.png)

## 功能特性

- **用户认证**：支持用户登录和注册
- **店铺浏览**：浏览附近的餐厅列表，支持搜索功能
- **店铺详情**：查看餐厅的详细信息，包括地址、电话、营业时间等
- **店铺评论**：查看和发表餐厅评论
- **即时聊天**：支持与餐厅工作人员实时聊天，包括正常模式和只读模式
- **店员信息**：查看餐厅店员的详细信息
- **关注用户**：关注感兴趣的用户，查看关注列表
- **多语言支持**：支持简体中文、繁体中文和英文
- **实时消息**：支持实时接收和发送消息

## 技术栈

- **Flutter**：3.0+
- **Dart**：2.17+
- **状态管理**：Provider
- **网络请求**：http
- **实时通信**：web_socket_channel, stomp_dart_client
- **多语言支持**：slang, slang_flutter
- **本地存储**：shared_preferences, flutter_secure_storage
- **数据序列化**：protobuf
- **UI组件**：Material Design 3

## 项目结构

```
lib/
├── core/                  # 核心配置和工具类
│   ├── constants/         # 常量定义
│   ├── theme/             # 主题配置
│   ├── services/          # 服务类
│   └── utils/             # 工具类
├── data/                  # 数据层
│   ├── models/            # 数据模型
│   └── services/          # 数据服务
├── generated/             # 生成的文件
│   └── translations.g.dart # 翻译文件
├── l10n/                  # 多语言资源
│   ├── en/                # 英文翻译
│   ├── zh_CN/             # 简体中文翻译
│   └── zh_TW/             # 繁体中文翻译
├── presentation/          # 表现层
│   ├── providers/         # Provider状态管理
│   ├── utils/             # 表现层工具
│   └── widgets/           # 自定义组件
├── routes/                # 路由配置
├── screens/               # 页面组件
└── main.dart              # 应用入口
```

## 快速开始

### 环境要求

- Flutter SDK 3.0+
- Dart SDK 2.17+
- Android Studio 或 VS Code
- Android 模拟器或真实设备

### 安装依赖

```bash
flutter pub get
```

### 生成翻译文件

```bash
dart run slang
```

### 运行项目

```bash
flutter run
```

### 构建项目

```bash
# 构建Android APK
flutter build apk
```

## 主要页面

1. **登录页面**：用户登录和注册
2. **店铺列表页面**：浏览附近的餐厅，支持搜索
3. **店铺详情页面**：查看餐厅详细信息
4. **店铺评论页面**：查看和发表餐厅评论
5. **店员列表页面**：查看餐厅的店员信息
6. **店员详情页面**：查看店员的详细信息
7. **聊天验证页面**：验证身份进入聊天室
8. **聊天页面**：与餐厅工作人员实时聊天
9. **个人中心页面**：查看和编辑个人信息
10. **关注列表页面**：查看关注的用户

## 聊天功能说明

### 正常模式

- 通过验证码验证后进入聊天室
- 可以查看历史消息和发送新消息
- 支持实时接收消息

### 只读模式

- 使用 `/chat-rooms/join-as-observer` 接口以观察者模式加入聊天室
- 可以查看历史消息和实时接收新消息
- 隐藏消息输入区域，无法发送消息
- 显示只读模式提示

## 多语言支持

项目支持以下语言：

- 简体中文 (zh_CN)
- 繁体中文 (zh_TW)
- 英文 (en)

### 添加新语言

1. 在 `lib/l10n` 目录下创建新的语言目录
2. 创建对应的翻译文件
3. 运行 `dart run slang` 生成翻译文件

## 许可证

Apache 2.0
